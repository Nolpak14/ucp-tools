<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-J5JSHV7H1E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-J5JSHV7H1E');
  </script>
  <!-- Ahrefs Analytics -->
  <script src="https://analytics.ahrefs.com/analytics.js" data-key="w/KDij6w81HzA8oXaw60JA" async></script>
  <!-- PostHog Analytics -->
  <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_KT4EfwHQFwSfY3Aq4gaAH9SZQNVIijRD3xOBzjAPPW5', {api_host:'https://eu.i.posthog.com',person_profiles:'identified_only',capture_pageview:true,capture_pageleave:true,autocapture:true});
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UCP Merchant Directory - AI-Ready E-commerce Stores | Universal Commerce Protocol</title>
  <meta name="description" content="Browse the public directory of Universal Commerce Protocol (UCP) enabled merchants. Discover AI-ready e-commerce stores compatible with Google AI Mode, ChatGPT Shopping, and Microsoft Copilot checkout.">
  <meta name="keywords" content="UCP Directory, AI-Ready Stores, Universal Commerce Protocol Merchants, AI Commerce Directory, UCP Enabled Stores, AI Shopping Compatible">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ucptools.dev/directory">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <meta name="theme-color" content="#2E86AB">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://ucptools.dev/directory">
  <meta property="og:title" content="UCP Merchant Directory - AI-Ready E-commerce Stores">
  <meta property="og:description" content="Browse Universal Commerce Protocol (UCP) enabled merchants ready for AI shopping agents.">
  <meta property="og:image" content="https://ucptools.dev/og-image.png">
  <meta property="og:site_name" content="UCP.tools">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://ucptools.dev/directory">
  <meta name="twitter:title" content="UCP Merchant Directory - AI-Ready E-commerce Stores">
  <meta name="twitter:description" content="Discover UCP-enabled e-commerce stores compatible with AI shopping agents.">
  <meta name="twitter:image" content="https://ucptools.dev/og-image.png">

  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "UCP Merchant Directory",
    "description": "Directory of Universal Commerce Protocol (UCP) enabled merchants ready for AI commerce.",
    "url": "https://ucptools.dev/directory",
    "isPartOf": {
      "@type": "WebSite",
      "name": "UCP.tools",
      "url": "https://ucptools.dev/"
    },
    "breadcrumb": {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {"@type": "ListItem", "position": 1, "name": "Home", "item": "https://ucptools.dev/"},
        {"@type": "ListItem", "position": 2, "name": "Merchant Directory", "item": "https://ucptools.dev/directory"}
      ]
    }
  }
  </script>
  <style>
    :root {
      --brand-blue: #2E86AB;
      --brand-teal: #36B5A2;
      --brand-green: #47C97A;
      --brand-gradient: linear-gradient(135deg, #2E86AB 0%, #36B5A2 50%, #47C97A 100%);
      --brand-gradient-hover: linear-gradient(135deg, #267593 0%, #2EA18F 50%, #3BB86B 100%);
      --color-dark: #1A2B3C;
      --color-medium: #5A6978;
      --color-light: #94A3B8;
      --color-border: #E2E8F0;
      --color-background: #F8FAFC;
      --color-card: #FFFFFF;
      --color-success: #47C97A;
      --color-warning: #F59E0B;
      --color-error: #EF4444;
      --color-info: #2E86AB;
      --grade-a-bg: #DCFCE7; --grade-a-text: #16A34A;
      --grade-b-bg: #DBEAFE; --grade-b-text: #2563EB;
      --grade-c-bg: #FEF9C3; --grade-c-text: #CA8A04;
      --grade-d-bg: #FED7AA; --grade-d-text: #EA580C;
      --grade-f-bg: #FEE2E2; --grade-f-text: #DC2626;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--color-background);
      color: var(--color-dark);
      line-height: 1.6;
    }
    .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }

    /* Header */
    header {
      background: var(--color-card);
      border-bottom: 1px solid var(--color-border);
      padding: 16px 0;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .header-inner { display: flex; justify-content: space-between; align-items: center; }
    .logo { display: flex; align-items: center; gap: 12px; font-size: 24px; font-weight: 700; text-decoration: none; }
    .logo-icon { width: 40px; height: 40px; border-radius: 8px; }
    .logo-text { background: var(--brand-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .logo-suffix { font-weight: 400; -webkit-text-fill-color: var(--color-medium); }
    nav a { margin-left: 24px; color: var(--color-medium); text-decoration: none; transition: color 0.2s; }
    nav a:hover, nav a.active { color: var(--brand-blue); }
    /* Dropdown */
    .dropdown { position: relative; display: inline-block; margin-left: 24px; }
    .dropdown-toggle { color: var(--color-medium); cursor: pointer; background: none; border: none; font-size: inherit; font-family: inherit; padding: 0; transition: color 0.2s; }
    .dropdown-toggle:hover, .dropdown:hover .dropdown-toggle { color: var(--brand-blue); }
    .dropdown-toggle::after { content: '‚ñº'; font-size: 0.6em; margin-left: 4px; vertical-align: middle; }
    .dropdown-menu { display: none; position: absolute; top: 100%; left: 0; background: var(--color-card); border: 1px solid var(--color-border); border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); min-width: 180px; z-index: 1001; padding: 8px 0; margin-top: 8px; }
    .dropdown-menu::before { content: ''; position: absolute; top: -8px; left: 0; right: 0; height: 8px; }
    .dropdown:hover .dropdown-menu { display: block; }
    .dropdown-menu a { display: block; padding: 10px 16px; color: var(--color-medium); text-decoration: none; margin-left: 0; }
    .dropdown-menu a:hover { background: rgba(46,134,171,0.08); color: var(--brand-blue); }
    /* Social Links */
    .social-links { display: flex; align-items: center; gap: 12px; margin-left: 24px; }
    .social-link { display: flex; align-items: center; justify-content: center; width: 32px; height: 32px; border-radius: 6px; background: linear-gradient(135deg, rgba(46,134,171,0.1) 0%, rgba(71,201,122,0.1) 100%); transition: all 0.2s ease; }
    .social-link:hover { transform: translateY(-2px); background: linear-gradient(135deg, rgba(46,134,171,0.2) 0%, rgba(71,201,122,0.2) 100%); }
    .social-link svg { width: 16px; height: 16px; fill: url(#brand-gradient); }
    .social-link:hover svg { fill: var(--brand-blue); }
    .dropdown-divider { height: 1px; background: var(--color-border); margin: 8px 0; }

    /* Hero */
    .hero {
      text-align: center;
      padding: 48px 20px;
      background: linear-gradient(135deg, rgba(46, 134, 171, 0.1) 0%, rgba(54, 181, 162, 0.05) 50%, rgba(71, 201, 122, 0.1) 100%);
    }
    .hero h1 { font-size: 36px; margin-bottom: 12px; }
    .hero h1 .gradient-text { background: var(--brand-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
    .hero p { font-size: 18px; color: var(--color-medium); max-width: 600px; margin: 0 auto 24px; }

    /* Stats Bar */
    .stats-bar {
      display: flex;
      justify-content: center;
      gap: 32px;
      flex-wrap: wrap;
    }
    .stat-item { text-align: center; }
    .stat-value { font-size: 28px; font-weight: 700; background: var(--brand-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    .stat-label { font-size: 14px; color: var(--color-medium); }

    /* Main Content */
    .main-content { padding: 40px 0; }
    .content-grid { display: grid; grid-template-columns: 280px 1fr; gap: 32px; }
    @media (max-width: 900px) { .content-grid { grid-template-columns: 1fr; } }

    /* Sidebar */
    .sidebar { display: flex; flex-direction: column; gap: 24px; }
    .filter-card {
      background: var(--color-card);
      border: 1px solid var(--color-border);
      border-radius: 12px;
      padding: 20px;
    }
    .filter-card h3 { font-size: 14px; font-weight: 600; color: var(--color-medium); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
    .search-input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid var(--color-border);
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.2s;
    }
    .search-input:focus { outline: none; border-color: var(--brand-blue); }
    .filter-list { list-style: none; }
    .filter-item {
      display: flex;
      align-items: center;
      padding: 8px 0;
      cursor: pointer;
      transition: color 0.2s;
    }
    .filter-item:hover { color: var(--brand-blue); }
    .filter-item input { margin-right: 10px; }
    .filter-count { margin-left: auto; font-size: 12px; color: var(--color-light); background: var(--color-background); padding: 2px 8px; border-radius: 10px; }

    /* Submit CTA */
    .submit-cta {
      background: var(--brand-gradient);
      border-radius: 12px;
      padding: 20px;
      color: white;
      text-align: center;
    }
    .submit-cta h3 { font-size: 16px; margin-bottom: 8px; }
    .submit-cta p { font-size: 14px; opacity: 0.9; margin-bottom: 16px; }
    .submit-btn {
      display: inline-block;
      padding: 10px 20px;
      background: white;
      color: var(--brand-blue);
      border-radius: 6px;
      font-weight: 600;
      text-decoration: none;
      transition: transform 0.2s;
    }
    .submit-btn:hover { transform: translateY(-2px); }

    /* Merchant Grid */
    .merchant-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
    .merchant-card {
      background: var(--color-card);
      border: 1px solid var(--color-border);
      border-radius: 12px;
      padding: 20px;
      transition: all 0.2s;
      text-decoration: none;
      color: inherit;
      display: block;
    }
    .merchant-card:hover { border-color: var(--brand-blue); box-shadow: 0 4px 12px rgba(46, 134, 171, 0.15); }
    .merchant-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
    .merchant-logo {
      width: 48px;
      height: 48px;
      border-radius: 8px;
      background: var(--color-background);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      font-weight: 700;
      color: var(--brand-blue);
    }
    .merchant-logo img { width: 100%; height: 100%; object-fit: cover; border-radius: 8px; }
    .merchant-info { flex: 1; min-width: 0; }
    .merchant-name { font-weight: 600; font-size: 16px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
    .merchant-domain { font-size: 13px; color: var(--color-medium); }
    .merchant-grade {
      padding: 4px 10px;
      border-radius: 6px;
      font-weight: 700;
      font-size: 14px;
    }
    .grade-A { background: var(--grade-a-bg); color: var(--grade-a-text); }
    .grade-B { background: var(--grade-b-bg); color: var(--grade-b-text); }
    .grade-C { background: var(--grade-c-bg); color: var(--grade-c-text); }
    .grade-D { background: var(--grade-d-bg); color: var(--grade-d-text); }
    .grade-F { background: var(--grade-f-bg); color: var(--grade-f-text); }
    .merchant-desc { font-size: 14px; color: var(--color-medium); margin-bottom: 12px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
    .merchant-tags { display: flex; flex-wrap: wrap; gap: 6px; }
    .merchant-tag { font-size: 11px; padding: 3px 8px; background: var(--color-background); border-radius: 4px; color: var(--color-medium); }
    .transport-tag { background: rgba(46, 134, 171, 0.1); color: var(--brand-blue); }

    /* Pagination */
    .pagination { display: flex; justify-content: center; align-items: center; gap: 8px; margin-top: 32px; }
    .page-btn {
      padding: 8px 16px;
      border: 1px solid var(--color-border);
      background: var(--color-card);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .page-btn:hover:not(:disabled) { border-color: var(--brand-blue); color: var(--brand-blue); }
    .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .page-info { color: var(--color-medium); font-size: 14px; }

    /* Loading & Empty States */
    .loading, .empty-state { text-align: center; padding: 60px 20px; color: var(--color-medium); }
    .loading::after { content: ''; display: inline-block; width: 24px; height: 24px; border: 3px solid var(--color-border); border-top-color: var(--brand-blue); border-radius: 50%; animation: spin 1s linear infinite; margin-left: 12px; vertical-align: middle; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .empty-state h3 { font-size: 18px; color: var(--color-dark); margin-bottom: 8px; }

    /* Modal */
    .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; }
    .modal-overlay.active { display: flex; }
    .modal {
      background: var(--color-card);
      border-radius: 16px;
      padding: 32px;
      max-width: 500px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
    }
    .modal h2 { font-size: 24px; margin-bottom: 8px; }
    .modal p.subtitle { color: var(--color-medium); margin-bottom: 24px; }
    .form-group { margin-bottom: 16px; }
    .form-group label { display: block; font-size: 14px; font-weight: 500; margin-bottom: 6px; }
    .form-group input, .form-group select, .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid var(--color-border);
      border-radius: 8px;
      font-size: 14px;
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: var(--brand-blue); }
    .form-actions { display: flex; gap: 12px; margin-top: 24px; }
    .btn { padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; }
    .btn-primary { background: var(--brand-gradient); color: white; }
    .btn-primary:hover { background: var(--brand-gradient-hover); }
    .btn-secondary { background: var(--color-background); color: var(--color-dark); }
    .btn-secondary:hover { background: var(--color-border); }
    .form-message { padding: 12px; border-radius: 8px; margin-bottom: 16px; font-size: 14px; }
    .form-message.error { background: var(--grade-f-bg); color: var(--grade-f-text); }
    .form-message.success { background: var(--grade-a-bg); color: var(--grade-a-text); }

    /* Footer */
    footer { text-align: center; padding: 40px 20px; color: var(--color-medium); font-size: 14px; border-top: 1px solid var(--color-border); margin-top: 60px; }
    footer a { color: var(--brand-blue); text-decoration: none; }
  </style>
</head>
<body>
  <header>
    <div class="container header-inner">
      <a href="/" class="logo">
        <img src="/logo.jpeg" alt="UCP.tools" class="logo-icon">
        <span class="logo-text">UCP<span class="logo-suffix">.tools</span></span>
      </a>
      <nav>
        <a href="/">Validator</a>
        <a href="/learn">Learn</a>
        <a href="/directory" class="active">Directory</a>
        <div class="dropdown">
          <span class="dropdown-toggle">Guides</span>
          <div class="dropdown-menu">
            <a href="/guides/fastucp">‚ö° FastUCP</a>
            <div class="dropdown-divider"></div>
            <a href="/guides/shopify">üõí Shopify</a>
            <a href="/guides/woocommerce">üîå WooCommerce</a>
            <a href="/guides/magento">üß± Magento</a>
            <a href="/guides/wix">‚ú® Wix</a>
            <a href="/guides/bigcommerce">üì¶ BigCommerce</a>
            <a href="/guides/squarespace">‚óºÔ∏è Squarespace</a>
          </div>
        </div>
        <div class="social-links">
          <svg width="0" height="0" style="position:absolute"><defs><linearGradient id="brand-gradient" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#2E86AB"/><stop offset="50%" style="stop-color:#36B5A2"/><stop offset="100%" style="stop-color:#47C97A"/></linearGradient></defs></svg>
          <a href="https://www.linkedin.com/company/ucp-tools" target="_blank" rel="noopener noreferrer" class="social-link" title="LinkedIn"><svg viewBox="0 0 24 24" fill="url(#brand-gradient)"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>
          <a href="https://www.instagram.com/ucptools/" target="_blank" rel="noopener noreferrer" class="social-link" title="Instagram"><svg viewBox="0 0 24 24" fill="url(#brand-gradient)"><path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.757-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/></svg></a>
          <a href="https://x.com/ucptoolsdev" target="_blank" rel="noopener noreferrer" class="social-link" title="X (Twitter)"><svg viewBox="0 0 24 24" fill="url(#brand-gradient)"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"/></svg></a>
          <a href="https://www.youtube.com/channel/UCh1heB19iCGGis-dyzwGg3A/" target="_blank" rel="noopener noreferrer" class="social-link" title="YouTube"><svg viewBox="0 0 24 24" fill="url(#brand-gradient)"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg></a>
          <a href="https://github.com/Nolpak14/ucp-tools" target="_blank" rel="noopener noreferrer" class="social-link" title="GitHub"><svg viewBox="0 0 24 24" fill="url(#brand-gradient)"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
        </div>
      </nav>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <h1><span class="gradient-text">UCP Merchant</span> Directory</h1>
      <p>Discover stores ready for AI commerce. Browse verified UCP-enabled merchants compatible with AI shopping agents.</p>
      <div class="stats-bar" id="stats-bar">
        <div class="stat-item">
          <div class="stat-value" id="stat-merchants">-</div>
          <div class="stat-label">Merchants</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="stat-categories">-</div>
          <div class="stat-label">Categories</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="stat-countries">-</div>
          <div class="stat-label">Countries</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="stat-avg-score">-</div>
          <div class="stat-label">Avg Score</div>
        </div>
      </div>
    </div>
  </section>

  <main class="main-content">
    <div class="container">
      <div class="content-grid">
        <aside class="sidebar">
          <div class="filter-card">
            <h3>Search</h3>
            <input type="text" class="search-input" id="search-input" placeholder="Search merchants...">
          </div>

          <div class="filter-card">
            <h3>Categories</h3>
            <ul class="filter-list" id="category-filters">
              <li class="filter-item"><span>Loading...</span></li>
            </ul>
          </div>

          <div class="filter-card">
            <h3>Grade</h3>
            <ul class="filter-list" id="grade-filters">
              <li class="filter-item"><label><input type="checkbox" value="A"> Grade A</label></li>
              <li class="filter-item"><label><input type="checkbox" value="B"> Grade B</label></li>
              <li class="filter-item"><label><input type="checkbox" value="C"> Grade C</label></li>
              <li class="filter-item"><label><input type="checkbox" value="D"> Grade D</label></li>
            </ul>
          </div>

          <div class="submit-cta">
            <h3>List Your Store</h3>
            <p>Get discovered by AI agents and join the directory.</p>
            <a href="#" class="submit-btn" id="open-submit-modal">Submit Store</a>
          </div>
        </aside>

        <section class="merchants-section">
          <div class="merchant-grid" id="merchant-grid">
            <div class="loading">Loading merchants</div>
          </div>

          <div class="pagination" id="pagination" style="display: none;">
            <button class="page-btn" id="prev-page" disabled>&larr; Previous</button>
            <span class="page-info" id="page-info">Page 1 of 1</span>
            <button class="page-btn" id="next-page" disabled>Next &rarr;</button>
          </div>
        </section>
      </div>
    </div>
  </main>

  <!-- Submit Modal -->
  <div class="modal-overlay" id="submit-modal">
    <div class="modal">
      <h2>Submit Your Store</h2>
      <p class="subtitle">Add your UCP-enabled store to the directory.</p>

      <div class="form-message" id="form-message" style="display: none;"></div>

      <form id="submit-form">
        <div class="form-group">
          <label for="submit-domain">Domain *</label>
          <input type="text" id="submit-domain" placeholder="example.com" required>
        </div>
        <div class="form-group">
          <label for="submit-name">Display Name</label>
          <input type="text" id="submit-name" placeholder="Your Store Name">
        </div>
        <div class="form-group">
          <label for="submit-description">Description</label>
          <textarea id="submit-description" rows="3" placeholder="Brief description of your store..."></textarea>
        </div>
        <div class="form-group">
          <label for="submit-category">Category</label>
          <select id="submit-category">
            <option value="">Select a category</option>
            <option value="fashion">Fashion & Apparel</option>
            <option value="electronics">Electronics</option>
            <option value="home">Home & Garden</option>
            <option value="beauty">Beauty & Health</option>
            <option value="food">Food & Grocery</option>
            <option value="sports">Sports & Outdoors</option>
            <option value="toys">Toys & Games</option>
            <option value="books">Books & Media</option>
            <option value="automotive">Automotive</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label for="submit-country">Country</label>
          <select id="submit-country">
            <option value="">Select a country</option>
            <option value="US">United States</option>
            <option value="GB">United Kingdom</option>
            <option value="DE">Germany</option>
            <option value="FR">France</option>
            <option value="CA">Canada</option>
            <option value="AU">Australia</option>
            <option value="NL">Netherlands</option>
            <option value="ES">Spain</option>
            <option value="IT">Italy</option>
            <option value="JP">Japan</option>
          </select>
        </div>
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" id="close-modal">Cancel</button>
          <button type="submit" class="btn btn-primary" id="submit-btn">Submit Store</button>
        </div>
      </form>
    </div>
  </div>

  <footer>
    <div class="container">
      <p>&copy; 2025 UCP.tools - <a href="https://ucp.dev" target="_blank">Universal Commerce Protocol</a></p>
    </div>
  </footer>

  <script>
    const API_BASE = '/api';
    let currentPage = 1;
    let totalPages = 1;
    let currentFilters = { search: '', category: '', country: '' };

    // Load stats
    async function loadStats() {
      try {
        const res = await fetch(`${API_BASE}/directory-stats`);
        const data = await res.json();

        document.getElementById('stat-merchants').textContent = data.stats.totalMerchants;
        document.getElementById('stat-categories').textContent = data.stats.totalCategories;
        document.getElementById('stat-countries').textContent = data.stats.totalCountries;
        document.getElementById('stat-avg-score').textContent = data.stats.avgScore;

        // Update category filters
        if (data.topCategories.length > 0) {
          const categoryList = document.getElementById('category-filters');
          categoryList.innerHTML = data.topCategories.map(cat => `
            <li class="filter-item">
              <label>
                <input type="checkbox" value="${cat.name}">
                ${formatCategory(cat.name)}
              </label>
              <span class="filter-count">${cat.count}</span>
            </li>
          `).join('');

          // Add event listeners
          categoryList.querySelectorAll('input').forEach(input => {
            input.addEventListener('change', () => {
              currentFilters.category = input.checked ? input.value : '';
              currentPage = 1;
              loadMerchants();
            });
          });
        }
      } catch (error) {
        console.error('Failed to load stats:', error);
      }
    }

    // Load merchants
    async function loadMerchants() {
      const grid = document.getElementById('merchant-grid');
      grid.innerHTML = '<div class="loading">Loading merchants</div>';

      try {
        const params = new URLSearchParams({
          page: currentPage,
          limit: 12,
          ...(currentFilters.search && { search: currentFilters.search }),
          ...(currentFilters.category && { category: currentFilters.category }),
        });

        const res = await fetch(`${API_BASE}/directory?${params}`);
        const data = await res.json();

        totalPages = data.pagination.totalPages;

        if (data.merchants.length === 0) {
          grid.innerHTML = `
            <div class="empty-state">
              <h3>No merchants found</h3>
              <p>Try adjusting your filters or be the first to submit your store!</p>
            </div>
          `;
        } else {
          grid.innerHTML = data.merchants.map(renderMerchantCard).join('');
        }

        updatePagination(data.pagination);
      } catch (error) {
        console.error('Failed to load merchants:', error);
        grid.innerHTML = '<div class="empty-state"><h3>Error loading merchants</h3><p>Please try again later.</p></div>';
      }
    }

    function renderMerchantCard(merchant) {
      const initials = (merchant.displayName || merchant.domain).substring(0, 2).toUpperCase();
      const transports = merchant.transports || [];

      return `
        <a href="https://${merchant.domain}" target="_blank" class="merchant-card">
          <div class="merchant-header">
            <div class="merchant-logo">
              ${merchant.logoUrl ? `<img src="${merchant.logoUrl}" alt="${merchant.displayName}">` : initials}
            </div>
            <div class="merchant-info">
              <div class="merchant-name">${merchant.displayName}</div>
              <div class="merchant-domain">${merchant.domain}</div>
            </div>
            ${merchant.ucpGrade ? `<div class="merchant-grade grade-${merchant.ucpGrade}">${merchant.ucpGrade}</div>` : ''}
          </div>
          ${merchant.description ? `<div class="merchant-desc">${merchant.description}</div>` : ''}
          <div class="merchant-tags">
            ${merchant.category ? `<span class="merchant-tag">${formatCategory(merchant.category)}</span>` : ''}
            ${merchant.countryCode ? `<span class="merchant-tag">${merchant.countryCode}</span>` : ''}
            ${transports.map(t => `<span class="merchant-tag transport-tag">${t}</span>`).join('')}
          </div>
        </a>
      `;
    }

    function formatCategory(cat) {
      if (!cat) return '';
      return cat.charAt(0).toUpperCase() + cat.slice(1).replace(/-/g, ' ');
    }

    function updatePagination(pagination) {
      const paginationEl = document.getElementById('pagination');
      const pageInfo = document.getElementById('page-info');
      const prevBtn = document.getElementById('prev-page');
      const nextBtn = document.getElementById('next-page');

      if (pagination.totalPages <= 1) {
        paginationEl.style.display = 'none';
        return;
      }

      paginationEl.style.display = 'flex';
      pageInfo.textContent = `Page ${pagination.page} of ${pagination.totalPages}`;
      prevBtn.disabled = pagination.page <= 1;
      nextBtn.disabled = pagination.page >= pagination.totalPages;
    }

    // Search handler
    let searchTimeout;
    document.getElementById('search-input').addEventListener('input', (e) => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => {
        currentFilters.search = e.target.value;
        currentPage = 1;
        loadMerchants();
      }, 300);
    });

    // Pagination handlers
    document.getElementById('prev-page').addEventListener('click', () => {
      if (currentPage > 1) {
        currentPage--;
        loadMerchants();
      }
    });

    document.getElementById('next-page').addEventListener('click', () => {
      if (currentPage < totalPages) {
        currentPage++;
        loadMerchants();
      }
    });

    // Modal handlers
    const modal = document.getElementById('submit-modal');
    document.getElementById('open-submit-modal').addEventListener('click', (e) => {
      e.preventDefault();
      modal.classList.add('active');
    });

    document.getElementById('close-modal').addEventListener('click', () => {
      modal.classList.remove('active');
    });

    modal.addEventListener('click', (e) => {
      if (e.target === modal) modal.classList.remove('active');
    });

    // Submit form handler
    document.getElementById('submit-form').addEventListener('submit', async (e) => {
      e.preventDefault();

      const formMessage = document.getElementById('form-message');
      const submitBtn = document.getElementById('submit-btn');

      formMessage.style.display = 'none';
      submitBtn.disabled = true;
      submitBtn.textContent = 'Submitting...';

      try {
        const res = await fetch(`${API_BASE}/directory`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            domain: document.getElementById('submit-domain').value,
            displayName: document.getElementById('submit-name').value || undefined,
            description: document.getElementById('submit-description').value || undefined,
            category: document.getElementById('submit-category').value || undefined,
            countryCode: document.getElementById('submit-country').value || undefined,
          }),
        });

        const data = await res.json();

        if (!res.ok) {
          throw new Error(data.details || data.error || 'Submission failed');
        }

        formMessage.className = 'form-message success';
        formMessage.textContent = 'Store submitted successfully! It will appear in the directory shortly.';
        formMessage.style.display = 'block';

        // Reset form and reload
        document.getElementById('submit-form').reset();
        setTimeout(() => {
          modal.classList.remove('active');
          loadMerchants();
          loadStats();
        }, 2000);

      } catch (error) {
        formMessage.className = 'form-message error';
        formMessage.textContent = error.message;
        formMessage.style.display = 'block';
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit Store';
      }
    });

    // Initialize
    loadStats();
    loadMerchants();
  </script>
</body>
</html>
